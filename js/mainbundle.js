(()=>{const e=document.querySelector(".burger"),t=document.querySelector(".burger-close"),s=document.querySelector(".menu");function o(){s.classList.remove("_open"),document.body.classList.remove("_block"),t.removeEventListener("click",o)}e.addEventListener("click",(function(){s.classList.add("_open"),document.body.classList.add("_block"),t.addEventListener("click",o)}));const n=document.querySelector(".reasons__btn");function i(){const e=window.scrollY,t=header.clientHeight,s=document.querySelector(".try").clientHeight-t-e;window.scrollBy({top:s,behavior:"smooth"})}"null"!=n&&n.addEventListener("click",i),n.addEventListener("click",i);const r=document.querySelectorAll(".feedbacks-slider__play-btn");for(let e=0;e<r.length;e++)r[e].addEventListener("click",c);function c(e){e.target.parentElement.classList.add("_hidden"),e.target.removeEventListener("click",c)}const a=document.querySelectorAll(".feedbacks-slider__feedback"),l=document.querySelector(".image-modal");for(let e=0;e<a.length;e++)a[e].addEventListener("click",d);function d(e){const t=e.target.innerHTML;l.querySelector(".image-modal__body").innerHTML=t,l.classList.add("_open"),document.body.classList.add("_block")}class u{constructor(e,t,s,o,n,i){this.wrapper=e,this.slider=document.querySelector(t),this.sliderItems=document.querySelectorAll(s),this.nextBtn=document.querySelector(o),this.prevBtn=document.querySelector(n),this.paginationWrapper=document.querySelector(i),this.setCount(3),this.insertPagination(),this.currentNumber=0,this.nextSlide=this.nextSlide.bind(this),this.prevSlide=this.prevSlide.bind(this),this.rotateToSlide=this.rotateToSlide.bind(this),this.addListenersBtn()}setCount(e){this.count=Math.ceil(this.sliderItems.length/e),this.insertPagination()}insertPagination(){this.paginationWrapper.innerHTML="";for(let e=0;e<this.count;e++){const t=`<div data-slide="${e}" class="feedbacks-slider__pagination-item">\n            </div>`;this.paginationWrapper.insertAdjacentHTML("beforeend",t)}this.paginationWrapper.firstChild.classList.add("_active"),this.paginationItems=document.querySelectorAll(`${this.wrapper} .feedbacks-slider__pagination-item`),this.translateSlider(0),this.addListenersPag()}addListenersBtn(){this.nextBtn.addEventListener("click",this.nextSlide),this.prevBtn.addEventListener("click",this.prevSlide)}addListenersPag(){for(let e=0;e<this.paginationItems.length;e++)this.paginationItems[e].addEventListener("click",this.rotateToSlide)}nextSlide(){if(this.currentNumber<this.count-1){const e=++this.currentNumber;this.translateSlider(e),this.colorPag(e)}}prevSlide(){if(this.currentNumber>0){const e=--this.currentNumber;this.translateSlider(e),this.colorPag(e)}}rotateToSlide(e){const t=e.target.dataset.slide;this.colorPag(t),this.translateSlider(t),this.currentNumber=t}colorPag(e){const t=document.querySelector(`${this.wrapper} .feedbacks-slider__pagination-item[data-slide="${e}"]`);t.parentElement.querySelector("._active").classList.remove("_active"),t.classList.add("_active")}translateSlider(e){const t=-100*e;this.slider.style.transform=`translate(${t}%,0px)`}touchStart(e){this.startPosition=e}moveSlider(e){if(this.startPosition>e){if(this.startPosition-e>50)return this.nextSlide(),1}else if(e-this.startPosition>50)return this.prevSlide(),1}}const h=new u(".feedbacks__look",".feedbacks__look .feedbacks-slider__body",".feedbacks__look .feedbacks-slider__item",".feedbacks__look .feedbacks-slider__arrow-right",".feedbacks__look .feedbacks-slider__arrow-left",".feedbacks__look .feedbacks-slider__pagination"),m=new u(".feedbacks__read",".feedbacks__read .feedbacks-slider__body",".feedbacks__read .feedbacks-slider__item",".feedbacks__read .feedbacks-slider__arrow-right",".feedbacks__read .feedbacks-slider__arrow-left",".feedbacks__read .feedbacks-slider__pagination"),_=document.querySelector(".feedbacks__look .feedbacks-slider");_.ontouchstart=e=>{e.preventDefault(),h.touchStart(e.touches[0].clientX),_.addEventListener("touchmove",f)};const f=e=>{e.preventDefault();const t=e.touches[0].clientX;h.moveSlider(t)&&_.removeEventListener("touchmove",f)},v=document.querySelector(".feedbacks__read .feedbacks-slider");v.ontouchstart=e=>{e.preventDefault(),m.touchStart(e.touches[0].clientX),v.addEventListener("touchmove",g)};const g=e=>{e.preventDefault();const t=e.touches[0].clientX;m.moveSlider(t)&&v.removeEventListener("touchmove",g)},b=document.querySelectorAll(".course__image");function p(){if(window.matchMedia("(max-width: 768px)").matches){for(let e=0;e<b.length;e++){const t=b[e];t.closest(".course__row").querySelector(".course__title").insertAdjacentElement("afterend",t)}const e=document.querySelectorAll(".course__call-manager");for(let t=0;t<e.length;t++){const s=e[t];s.closest(".course__footer").insertAdjacentElement("afterbegin",s)}h.setCount(1),m.setCount(1)}else window.matchMedia("(max-width: 1250px)").matches?(h.setCount(2),m.setCount(2)):(h.setCount(3),m.setCount(3))}p(),window.addEventListener("resize",p);const L=document.querySelector(".feedbacks__look"),S=document.querySelector(".feedbacks__read"),k=document.querySelector(".feedbacks .tab-look"),y=document.querySelector(".feedbacks .tab-read");k.addEventListener("click",(function(){y.classList.contains("_active")&&(y.classList.remove("_active"),k.classList.add("_active"),S.classList.add("_hidden"),L.classList.remove("_hidden"))})),y.addEventListener("click",(function(){k.classList.contains("_active")&&(k.classList.remove("_active"),y.classList.add("_active"),L.classList.add("_hidden"),S.classList.remove("_hidden"))})),function(){const e=new IntersectionObserver((e=>{e.forEach((e=>{const t=e.target.dataset.ref,s=document.querySelector('.navigation__item[data-ref="'+t+'"');e.isIntersecting&&(document.querySelector(".navigation__item._active").classList.remove("_active"),s.classList.add("_active"))}))}),{threshold:0,rootMargin:"-50px 0px -55% 0px"}),t=document.querySelectorAll(".navigation__item[data-ref]");for(let s=0;s<t.length;s++){const o=t[s].dataset.ref,n=document.querySelector('.wrapper [data-ref="'+o+'"');e.observe(n)}}();const q=document.querySelectorAll(".navigation__item[data-ref]");for(let e=0;e<q.length;e++)q[e].addEventListener("click",w);function w(e){const t=e.target;document.querySelector(".header .navigation__item._active").classList.remove("_active"),t.classList.add("_active");const n=t.dataset.ref,i=document.querySelector('section[data-ref="'+n+'"').getBoundingClientRect().top;topOffset=document.querySelector(".header").offsetHeight,s.classList.contains("_open")&&o();const r=i-topOffset;window.scrollBy({top:r,behavior:"smooth"})}function E(e){const t=e.target.dataset.modal;document.querySelector(`.${t}`).classList.add("_open"),document.body.classList.add("_block")}const C=document.querySelectorAll(".close-modal");for(let e=0;e<C.length;e++)C[e].addEventListener("click",A);function A(e){e.target.closest(".modal").classList.remove("_open"),document.body.classList.remove("_block")}const x=document.querySelectorAll("button[data-modal");for(let e=0;e<x.length;e++){const t=x[e];t.classList.contains("_trial-lesson")||t.addEventListener("click",E)}const P=document.querySelectorAll(".form");async function T(e){e.preventDefault(),function(e){let t=0;const s=e.querySelector(".input-email");B(s),!/^[\w]{1}[\w-\.]*@[\w-]+\.[a-z]{2,4}$/i.test(s.value)&&($(s),t++);const o=e.querySelector(".input-phone");return B(o),function(e){return!/^\+?[78][-\(]?\d{3}\)?-?\d{3}-?\d{2}-?\d{2}$/.test(e.value)}(o)&&($(o),t++),t}(e.target)||(function(e){const t=new XMLHttpRequest,s=new FormData(document.forms.buySetForm);t.open("POST","../form.php"),console.log(s),t.send(s),t.onloadend=()=>{200==t.status?e.reset():alert(`Произошла ошибка во время отправки: ${t.status}`)}}(e.target),e.target.classList.contains("_trial-lesson")&&E(e))}function $(e){e.classList.add("_error")}function B(e){e.classList.remove("_error")}document.addEventListener("DOMContentLoaded",(function(){for(let e=0;e<P.length;e++){const t=P[e];null!=t&&t.addEventListener("submit",T)}}));const M=document.querySelectorAll(".question__title");for(let e=0;e<M.length;e++)M[e].addEventListener("click",D);function D(e){e.target.closest(".question").classList.toggle("_open")}const H=new class{constructor(){this.$header=document.querySelector(".header"),this.firstCall=this.lastCall,this.isColor=!0}coloring=()=>{this.isColor&&window.pageYOffset>=10?(this.$header.classList.remove("_transparent"),this.isColor=!1):!this.isColor&&window.pageYOffset<200&&(this.$header.classList.add("_transparent"),this.isColor=!0)};change=()=>{this.lastCall=Date.now(),(void 0===this.firstCall||this.lastCall-this.firstCall>10)&&(this.firstCall=Date.now(),this.coloring()),clearTimeout(this.lastCallTimer),this.lastCallTimer=setTimeout((()=>{this.coloring()}),10)}};window.addEventListener("scroll",H.change);const I=document.querySelectorAll("button.scroll-to-form");for(let e=0;e<I.length;e++)I[e].addEventListener("click",O);function O(e){const t=document.querySelector("section.trial-lesson").getBoundingClientRect().top-document.querySelector(".header").offsetHeight;window.scrollBy({top:t,behavior:"smooth"})}})();